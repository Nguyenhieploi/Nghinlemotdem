<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css">
    <link rel="stylesheet" href="./css/style.css">
    
</head>

<body>
    <div class="container">
        <div class="header">
            <h2>Registration form</h2>
        </div>
        <form action="" class="form" id="form">
            <div class="form-control">
                <label for=""> FullName:</label>
                <input type="text" placeholder="Enter your name" id="fullname" pattern="[A-Za-z]+">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>

                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="">Username</label>
                <input type="text" placeholder="pro123" id="username">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>

                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="">Email:</label>
                <input type="email" placeholder="Enter your email" id="email">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>

                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="">Password:</label>
                <input type="password" placeholder="Enter your password" id="password">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>

                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="">Password Confirm:</label>
                <input type="password" placeholder="Confirm your password" id="password2">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>

                <small>Error message</small>
            </div>
            <div class="form-control">
                <label for="">Birthday:</label>
                <input type="date" placeholder="123456" cols=20 id="birthday">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>

                <small>Error message</small>
            </div>

            <div class="form-control">
                <label for="">Address:</label>
                <input type="text" placeholder="không bắt buộc" id="Address">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>
            
            <div class="form-control">
                <label for="">Country:</label>
                <input type="text" placeholder="Your Country..." id="Country">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>
                <small>Error message</small>
            </div>

            <div class="form-control">
                <label for="">Zipcode: </label>
                <input type="text" placeholder="Enter zipcode..." cols=20 id="zipcode">
                <i class="fas fa-check-circle"></i>
                <i class="fas fa-exclamation-circle"></i>

                <small>Error message</small>
            </div>

            <div class="form-control">
                <label class="label">Gender:</label>
                <div class="genderchoose">
                    <label class="option1">Male
                        <input type="checkbox" checked="checked" name="gender">
                        <span class="checkmark"></span>
                    </label>
                    <label class="option2">Female
                        <input type="checkbox" name="gender">
                        <span class="checkmark"></span>
                    </label>
                </div>
            </div>
            <div class="form-control">
                <div class = "langchoose">
                    <label class="label">Language:</label>
                    <div class="p-t-10">
                        <label class="eng1">English
                            <input type="checkbox" checked="checked" name="gender">
                            <span class="checkmark"></span>
                        </label>
                        <label class="vn1">Vietnamese
                            <input type="checkbox" name="gender">
                            <span class="checkmark"></span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-control">
                <div class = "about">
                    <label for="">About</label>
                    <textarea id="About" cols="43" rows="10" onKeyUp="KiemTra();"> </textarea>
                    <small>Error message</small>
                </div>
            </div>
            <button>Submit</button>
        </form>

        <script>
            const form = document.getElementById('form');
            const username = document.getElementById('username');
            const email = document.getElementById('email');
            const password = document.getElementById('password');
            const password2 = document.getElementById('password2');
            const fullname = document.getElementById('fullname');
            const zipcode = document.getElementById('zipcode');
            const Address = document.getElementById('Address');
            const Country = document.getElementById('Country');

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                checkInputs();
            });
            function checkInputs() {
                const usernameValue = username.value.trim();
                const emailValue = email.value.trim();
                const passwordValue = password.value.trim();
                const password2Value = password2.value.trim();
                const fullnameValue = fullname.value.trim();
                const zipcodeValue = zipcode.value.trim();
                const addressValue = Address.value.trim();
                const CountryValue = Country.value.trim();

                var Ktzipcode = isNaN(zipcodeValue);
                var aboutValue = About.value.trim();
                var birthdayValue = birthday.value.trim();


                if (birthdayValue === '') {
                    setErrorFor(birthday, 'không được để trống');
                } else {
                    setSuccessFor(birthday)
                }
                if (aboutValue.length < 200) {
                    setErrorFor(About, 'Phải hơn 200 kí tự');
                } else {
                    setSuccessFor(About);
                }
                if (zipcodeValue ==='') {
                    setErrorFor(zipcode, 'Zipcode không được để trống')
                } else if (Ktzipcode == true) {
                    setErrorFor(zipcode, 'Zipcode phải là số')
                } else {
                    setSuccessFor(zipcode)
                }

                if (addressValue ==='') {
                    setErrorFor(Address, 'Address không được để trống')
                } else {
                    setSuccessFor(Address)
                }

                if (CountryValue ==='') {
                    setErrorFor(Country, 'Bắt buộc phải chọn 1 thành phố')
                } else {
                    setSuccessFor(Country)
                }

                if (usernameValue === '') {
                    setErrorFor(username, 'Username không được để trống');
                } else if(usernameValue.length < 5 ){
                    setErrorFor(username, 'Username khong duoc duoi 5 ki tu');
                } else if(usernameValue.length >12 ){
                    setErrorFor(username, 'Username khong duoc tren 12 ki tu');
                } else {
                    setSuccessFor(username);
                }
                if(emailValue === ''){
                    setErrorFor(email,'Email không được để trống')
                }else if(!isEmail(emailValue)){
                    setErrorFor(email,'Email is not valid')
                }else{
                    setSuccessFor(email);
                }

                if(passwordValue ===''){
                    setErrorFor(password,'mật khẩu không được để trống');
                } else if(passwordValue.length < 7 ){
                    setErrorFor(password, 'password khong duoc duoi 7 ki tu');
                } else if(passwordValue.length >12 ){
                    setErrorFor(password, 'password khong duoc tren 12 ki tu');
                }else{
                    setSuccessFor(password);
                }

                if(password2Value ===''){
                    setErrorFor(password2,'mật khẩu không được để trống');

                }else if(passwordValue !== password2Value){
                    setErrorFor(password2,'mật khẩu không trùng khớp');
                }else{
                    setSuccessFor(password2);
                }
                if(fullnameValue === ''){
                    setErrorFor(fullname,'Xin hãy điền vào đây');
                } else {
                    setSuccessFor(fullname)
                }
            }
            function setErrorFor(input, message) {
                const formControl = input.parentElement;
                const small = formControl.querySelector('small');

                small.innerText = message;

                formControl.className = 'form-control error'
            }


            function setSuccessFor(input) {
                const formControl = input.parentElement;
                formControl.className = 'form-control success';
            }
            function isEmail(email){
                return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email);
            }
            function KiemTra() {
            if (About.value.length > 500){alert("Bạn đã gõ quá số ký tự cho phép!")} ;
            SoKyTu.value = About.value.length;
            }
            
        </script>
    </div>
</body>

</html>